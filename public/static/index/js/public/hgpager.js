(function(n){function e(n){this.wrapper=n}function c(n,t){if(t!==null&&t!==undefined)for(var i=0;i<t.length;i++)n.push({name:t[i].name,value:t[i].value})}function u(t){var f=window.location.hash.substring(1),r,i,u;if(n.trim(f)!="")for(r=f.split("&"),i=0;i<r.length;i++)if(u=r[i].split("="),u[0].toString().toLowerCase()===t.toString().toLowerCase())return parseInt(u[1])||1;return 0}function f(){var u=window.location.hash.substring(1),i,t,r;if(n.trim(u)!="")for(i=u.split("&"),t=0;t<i.length;t++)if(r=i[t].split("="),r[0].toString().toLowerCase()==="pagesize")return parseInt(r[1])||1;return 0}function t(t,i,r,u){var f=window.location.hash.substring(1),e;f=s(f,t,i);r&&(e="pagesize",u==0&&(u=n("select[data-pagesizebox=true]").val()),f=s(f,e,u));window.location.hash=f}function o(n,t){t!==undefined&&(jQuery("#hidPageSize").length==0&&jQuery(t).append(jQuery("<input type='hidden' />").attr({id:"hidPageSize",name:"PageSize"})),n>0?jQuery("#hidPageSize").val(n):jQuery("#hidPageSize").val(""))}function s(t,i,r){var u,f;return n.trim(t)==""?t=i+"="+r:(u=new RegExp(i+"=[^&]*","i"),u.test(t)?(f=t.replace(u,i+"="+r),t=f):t+="&"+i+"="+r),t}function i(t,i){for(var r=window,u=(t||"").split(".");r&&u.length;)r=r[u.shift()];if(typeof r=="function")return r;if(n.trim(t).toLowerCase().indexOf("function")==0)return new Function("return ("+t+").apply(this,arguments);");i.push(t);try{return Function.constructor.apply(null,i)}catch(f){alert("Error:\r\n"+t+"\r\nis not a valid callback function")}}function h(n){var t,i,r;window.event?(t=n.keyCode,i=n.srcElement):n.which&&(t=n.which,i=n.target);r=[8,37,39,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105];t!==null&&r.indexOf(t)<0&&(t==13&&i!=null&&i.click(),n.preventDefault?n.preventDefault():event.returnValue=!1)}function r(i){var r=n(i).closest("[data-mvcpager=true]"),c=r.data("maxpages"),l=r.data("invalidpageerrmsg"),a=r.data("outrangeerrmsg"),f=r.data("firstpage"),v=r.data("urlformat"),o=r.data("pageparameter"),y=r.data("ajax"),s=r.data("showpapersize")||!1,p=r.find("select[data-pagesizebox=true]").val(),u=0,e,h;if(s&&typeof n(i).attr("data-pagesizebox")!="undefined")u=1;else if(e=r.find("select[data-pageindexbox=true],input:text[data-pageindexbox=true]"),e.length>0&&(u=e.val()),h=new RegExp("^\\s*(\\d+)\\s*$"),h.test(u)){if(RegExp.$1<1||RegExp.$1>c){alert(a);return}}else{alert(l);return}y?t(o,u,s,p):self.location.href=typeof f!="undefined"&&f!==!1&&u=="1"?f:decodeURI(v).replace("__"+o+"__",u)}n.fn.initMvcPagers=function(){return this.each(function(){new e(this).init()})};e.prototype={wrapper:null,url:null,pageIndexName:null,updateTarget:null,onBegin:null,onComplete:null,onFailure:null,onSuccess:null,httpMethod:null,confirm:null,loadingElementId:null,loadingDuration:0,partialLoading:null,currentPage:null,currentSize:null,dataFormId:null,isFirstLoad:!0,initIndex:null,allowReload:!1,searchCriteria:null,init:function(){var i=n(this.wrapper),v=i.data("ajax")||!1,c=i.data("showpapersize")||!1,l=i.data("pageparameter"),e,a;if(this.pageIndexName=l,v){this.updateTarget=i.data("ajax-update");this.onBegin=i.data("ajax-begin");this.onComplete=i.data("ajax-complete");this.onFailure=i.data("ajax-failure");this.onSuccess=i.data("ajax-success");this.confirm=i.data("ajax-confirm")||undefined;this.httpMethod=i.data("ajax-method")||"GET";this.loadingElementId=i.data("ajax-loading")||undefined;this.dataFormId=i.data("ajax-dataformid")||undefined;this.loadingDuration=i.data("ajax-loading-duration")||0;this.partialLoading=i.data("ajax-partialloading")||!1;this.currentPage=i.data("ajax-currentpage")||1;this.currentSize=i.data("ajax-currentsize")||10;this.url=i.data("urlformat");this.initIndex=this.currentPage;var o="[data-mvcpager=true]",p=u(l),s=f(),y=n(this.updateTarget).attr("status")||"unload";if(y=="unload")n(this.updateTarget).attr("status","loading");else return;this.dataFormId!==undefined&&(e=this,a=n(e.dataFormId).data("ajax")||!1,n(e.dataFormId).submit(function(i){e.searchCriteria=n(e.dataFormId).serializeArray();a?e.currentPage!==1?(e.currentPage=1,t(e.pageIndexName,-1,c,s)):e.allowReload=!0:(e.allowReload=!0,e.currentPage===1?e.loadData(1,s,{type:e.httpMethod,data:[]}):(t(e.pageIndexName,1,c,s),e.currentPage=1),i.preventDefault())}));this.initHashChange();n(this.updateTarget).on("click",o+" a[data-pageindex]",function(i){var r=n(this).data("pageindex");i.preventDefault();t(l,r,c,s)});n(this.updateTarget).on("keydown",o+" input:text",function(){h(event)});n(this.updateTarget).on("click",o+" input[type=button][data-submitbutton=true]",function(){r(this)});n(this.updateTarget).on("change",o+" select[data-autosubmit=true],input:text[data-autosubmit=true]",function(){r(this)})}else jQuery("input:text",this.wrapper).keydown(function(n){h(n)}),jQuery("input[type=button][data-submitbutton=true]",this.wrapper).click(function(){r(i)}),jQuery("select[data-autosubmit=true],input:text[data-autosubmit=true]",this.wrapper).change(function(){r(i)})},initHashChange:function(){var r=document.documentMode,t=this,i;"onhashchange"in window&&(r===undefined||r>7)?n(window).bind("hashchange",function(){var n=u(t.pageIndexName),i=f();o(i,t.dataFormId);n===0&&(n=t.initIndex);t.loadData(n,i,{type:t.httpMethod,data:[]})}):(i=window.location.hash,setInterval(function(){if(window.location.hash!=i){i=window.location.hash;var n=u(t.pageIndexName),r=f();o(r,t.dataFormId);n===0&&(n=t.initIndex);t.loadData(n,r,{type:t.httpMethod,data:[]})}},200))},loadData:function(t,r,u){var f=this,e;(t!==-1||f.currentSize!=0&&f.currentSize!=r)&&(t!==0||!f.isFirstLoad||f.currentSize!=0&&f.currentSize!=r)&&(t!=f.currentPage||f.allowReload||f.currentSize!=0&&f.currentSize!=r)&&(!f.confirm||window.confirm(f.confirm))&&(n.extend(u,{url:this.url.replace("__"+f.pageIndexName+"__",t).replace("__pagesize__",r),beforeSend:function(t){var r=u.type.toUpperCase(),e;return r==="GET"||r==="POST"||t.setRequestHeader("X-HTTP-Method-Override",r),e=i(f.onBegin,["xhr"]).apply(this,arguments),e!==!1&&f.loadingElementId!==undefined&&n(f.loadingElementId).show(f.loadingDuration),e},complete:function(){f.loadingElementId!==undefined&&n(f.loadingElementId).hide(f.loadingDuration);i(f.onComplete,["xhr","status"]).apply(this,arguments)},success:function(u){f.partialLoading?n(f.updateTarget).html(n(f.updateTarget,u).html()):n(f.updateTarget).html(u);f.currentPage=t;f.currentSize=r;f.isFirstLoad=!1;i(f.onSuccess,["data","status","xhr"]).apply(this,arguments)},error:i(f.onFailure,["xhr","status","error"])}),f.dataFormId!==undefined&&(f.searchCriteria=n(f.dataFormId).serializeArray(),c(u.data,f.searchCriteria)),u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),e=u.type.toUpperCase(),e==="GET"||e==="POST"||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:e})),n.ajax(u))}}})(jQuery);jQuery(function(){$("[data-mvcpager=true]").initMvcPagers()})