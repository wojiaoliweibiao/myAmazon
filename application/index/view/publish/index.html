{:widget('Blog/header')}

    <link href="__STATIC__/index/css/bootstrap.min.css" rel="stylesheet"/>


    <script src="__STATIC__/index/js/b5fd31c8653449399b98d33819bf6bc8.js"></script>

    <script src="__STATIC__/index/js/bc872c697d1146a99adc7d4c03414551.js"></script>

    <script src="__STATIC__/index/js/hg.common.js"></script>

    <script src="__STATIC__/index/js/jquery.fancybox.js"></script>

    <link href="__STATIC__/index/css/jquery.fancybox.css" rel="stylesheet"/>

    <!--[if lt IE 9]>
      <script src="__STATIC__/index/js/html5shiv.min.js"></script>
      <script src="__STATIC__/index/js/respond.min.js"></script>
    <![endif]-->
{:widget('Blog/left')}   
<ul id="divTabPanel" class="nav nav-tabs" role="tablist">
    <li id="liTabCrawlProduct" role="presentation" class="active"><a href="javascript:void(0);"><hg:trans>商品采集</hg:trans></a></li>
</ul>
<div style="padding:15px 0px 5px 20px; margin-bottom:20px;" class="panel panel-default">
    <form class="form-horizontal">
        <input name="__RequestVerificationToken" type="hidden" value="88zl-4btiKP9S4TiBfVkHXTdGjOaKzQVwG6ZplrCe-UkcPbWbU4zKiI5Xtx49W11h5YaaiC_XD76XuCmfvomP3L7ZJQS1TzL1qW1Oc16zNSJCebd2owuFf6NgqcCk24tdjSGBJ1v6yshQj7frSmaCqYdcGCG0pCLfvwOysepZ1g1" />
        <div class="form-group">
            <label for="ddlProductCatalog" class="col-sm-2 control-label"><hg:trans>采集到的商品放在哪个目录下</hg:trans>：</label>
            <div class="col-sm-8">
                <select class="form-control" id="ddlProductCatalog" name="ddlProductCatalog"><option value="110">商品分类</option>
<option value="111">|--家居</option>
</select>
            </div>
        </div>
    </form>
</div>
<div>
    <div class="status-group">
        <label storeid="0" id="Storeid" class="active">
            <a><hg:trans>根据商品采集</hg:trans></a>
            <span></span>
        </label>
        <label itemid="1" id="produid">
            <a><hg:trans>根据店铺分类采集</hg:trans></a>
            <span></span>
        </label>
        <span style="font-size:14px; float:right;margin-right: 50px;">
            <hg:trans style="font-size:18px;color:red;">推荐：</hg:trans><hg:trans>建议使用</hg:trans><u>
                <a href="http://api.sumool.com/FileData/SMchromeCrawl.crx" target="_blank" style="font-weight: bold;">采集插件</a>
            </u><hg:trans>，采集更稳定更快速！采集插件仅支持</hg:trans><hg:trans style="font-size:14px;color:red;">谷歌浏览器</hg:trans><hg:trans>
                安装、使用！
            </hg:trans>
        </span>
        </br>
        
    </div>
    <div id="divTabContentPanel" class="tab-content">
        
        <div id="tabContent_liTabCrawlProduct" role="tabpanel" class="tab-pane fade active in">
            <div style="margin-left: 15px;">
                <div class="form-group">
                    <br />
                    <label for="exampleInputEmail1"><hg:trans>请在下面的文本框中输入采集商品网址，每条记录占一行</hg:trans></label>
                    <textarea class="form-control" id="txtUrls" name="txtUrls" rows="6" hgtrans="true" placeholder="输入采集商品网址，每条记录占一行"></textarea>
                    <span class="help-block"><span class="label label-success" style="font-size:12px;"><hg:trans>说明</hg:trans></span> <hg:trans>单品采集功能支持</hg:trans>：<a href="https://www.taobao.com/" target="_blank"><hg:trans>淘宝</hg:trans></a>、<a href="http://www.aliexpress.com/" target="_blank"><hg:trans>速卖通</hg:trans></a>、<a href="http://www.1688.com/" target="_blank">1688</a>、<a href="https://www.tmall.com/" target="_blank"><hg:trans>天猫</hg:trans></a>、<a href="https://www.jd.com" target="_blank"><hg:trans>京东</hg:trans></a>、<a href="http://www.ebay.com/" target="_blank">eBay（<hg:trans>主站</hg:trans>）</a>、<a href="http://www.amazon.com" target="_blank"><hg:trans>亚马逊（美国站）</hg:trans></a>、<a href="https://www.wish.com" target="_blank">Wish</a>、<a href="http://www.cases.com/" target="_blank">Cases</a>、<a href="https://www.dhgate.com/" target="_blank">Dhgate</a>、<a href="https://www.alibaba.com/" target="_blank">Alibaba</a></span>
                </div>
                <button type="button" id="btnCraw" class="btn btn-primary"><hg:trans>开始采集</hg:trans></button>
                <button type="button" id="btnClear" class="btn btn-default"><hg:trans>清除</hg:trans></button>
            </div>
            <div id="divCrawLogPanel" class="search-panel hide" style="margin:10px 20px;"></div>
        </div>
    </div>

    <div id="divTabContentproPanel" role="tabpanel" class="tab-pane fade active in" style="display:none">
        <div style="margin-left: 15px">
            <div class="form-group">
                <br />
                <label for="exampleInputEmail1"><hg:trans>请在下面的文本框中输入采集店铺商品分类网址</hg:trans></label>
                <textarea class="form-control" id="TxtUrls" name="TxtUrls" rows="3" hgtrans="true" placeholder="输入采集店铺商品分类网址"></textarea>
                <span class="help-block"><span class="label label-success" style="font-size:12px;"><hg:trans>说明</hg:trans></span> <hg:trans>店铺采集功能支持</hg:trans>：<a href="https://www.taobao.com/" target="_blank"><hg:trans>淘宝</hg:trans></a>、<a href="https://www.tmall.com/" target="_blank"><hg:trans>天猫</hg:trans></a>、<a href="https://www.jd.com" target="_blank"><hg:trans>京东</hg:trans></a>、<a href="http://www.ebay.com/" target="_blank">eBay（<hg:trans>主站</hg:trans>）</a>、<a href="http://www.cases.com/" target="_blank">Cases</a>、<a href="https://www.dhgate.com/" target="_blank">Dhgate</a>
            </div>
            <button type="button" id="BtnCraw" class="btn btn-primary"><hg:trans>开始采集</hg:trans></button>
            <button type="button" id="BtnClear" class="btn btn-default"><hg:trans>清除</hg:trans></button>
        </div>
        <div>
            <label id="craw" style="margin-left:20px;color:red "></label>
        </div>
        <div id="DivCrawLogPanel" class="search-panel hide" style="margin:10px 20px;"></div>
    </div>
</div>
<script language="javascript" type="text/javascript">
    jQuery(function () {
        var length = 0;
        $("#Storeid").click(function () {
            $("#Storeid").addClass("active");
            $("#produid").removeClass("active");
            $("#divTabContentPanel").show();
            $("#divTabContentproPanel").hide();
        });
        $("#produid").click(function () {
            $("#produid").addClass("active");
            $("#Storeid").removeClass("active");
            $("#divTabContentproPanel").show();
            $("#divTabContentPanel").hide()
        });
        redgle.tab.init({ tabPanel: "divTabPanel", contentPanel: "divTabContentPanel" });
        redgle.tab.init({ tabPanel: "divTabPanel", contentPanel: "divTabContentproPanel" });
        $("#btnCraw").click(function () {
            $("#btnCraw").val("正在采集");

            $("#divCrawLogPanel").empty().removeClass("hide");
            var urlList = $("#txtUrls").val().split("\n");

            $.each(urlList, function (index, item) {
                var url = $.trim(this);
                if (url.length == 0)
                    return;
                else if (!checkURL(url))
                    return;
                if (url.indexOf("www.ebay.com/itm") > 0) {
                    var ebay = url.split('?');
                    var hh = ebay[0];
                    hh = hh.split('/').pop();
                    url = "https://www.ebay.com/itm/" + hh;
                }
                else if (url.indexOf("www.amazon.cn/dp/") > 0) {
                    var amazon = url.split('/');
                    var hh = amazon[4];
                    url = "https://www.amazon.cn/dp/" + hh;
                }
                var logPanel = $("<div class=\"row bottom-line\"></div>").attr({ "itemurl": url, "status": "unload" }).appendTo($("#divCrawLogPanel"));
                logPanel.append("<div class=\"col-sm-10\" style=\" overflow:hidden;text-overflow:ellipsis;\"><a href=\"" + url + "\" target=\"_blank\"><nobr>" + url + "</nobr></a></div>");
                logPanel.append("<div id=\"divCrawlStatus\" class=\"col-sm-2\" style=\"text-align:center\"><hg:trans>等待采集</hg:trans></div>");
            });

            if ($("#divCrawLogPanel>div").length > 0) {
                doStartCrawProduct();
            }
        });

        $("#btnClear").click(function () {

            $("#txtUrls").val("");
            $("#divCrawLogPanel").empty().addClass("hide");
        });

        //店铺
        redgle.tab.init({ tabPanel: "divTabPanel", contentPanel: "divTabContentproPanel" });
        $("#BtnCraw").click(function () {
            $("#BtnCraw").text("正在采集");
            $("#craw").hide();
            $("#BtnCraw").attr("disabled", true);
            var unloadList = $("#divCrawLogPanel>div[status='unload']");
            creawproductt(unloadList.eq(0));

        });

        $("#BtnClear").click(function () {
            $("#BtnCraw").text("开始采集");
            $("#BtnCraw").attr("disabled", false);
            $("#craw").hide()
            $("#TxtUrls").val("");
            $("#DivCrawLogPanel").empty().addClass("hide");
        });
    });

    function doStartCrawProduct() {
        var unloadList = $("#divCrawLogPanel>div[status='unload']");
        if (unloadList.length == 0) {
            //采集完成
            $("#txtUrls").val("");
            return;
        }
        // creawproductt(unloadList.eq(0));
        doCrawProduct(unloadList.eq(0));
    }

    function DoStartCrawProduct() {
        var unloadList = $("#DivCrawLogPanel>div[status='unload']");
        if (unloadList.length == 0) {
            //采集完成
            return;
        }

        DoCrawProduct(unloadList.eq(0));
    }

    function creawproductt(element) {
        $("#DivCrawLogPanel").empty().removeClass("hide");
        var url = $("#TxtUrls").val();
        //if (url.indexOf("www.ebay.com/sch") > 0) {
        //    var s = url.split("/");
        //    url = s[0].toString() +"//"+ s[2].toString() +"/"+ s[3].toString() +"/"+ s[4].toString();
        //}
        var catalogId = $("#ddlProductCatalog").val()
        var Listitems = 0;
        $.ajax({
            type: "POST",
            url: "/Crawl/CrawProductlist",
            data: { url: url, catalogId: catalogId, Listitems: Listitems },
            datatype: "json",
            async: true,
            global: false,
            success: function (data) {
                if (data.HasError) {
                    var LogPanel = $("<div class=\"row bottom-line\"></div>").attr({ "itemurl": url, "status": "unload" }).appendTo($("#DivCrawLogPanel"));
                    LogPanel.append("<div class=\"col-sm-10\" style=\"text-overflow:ellipsis;\"><a href=\"" + url + "\" target=\"_blank\"><nobr>" + url + "</nobr></a></div>");
                    LogPanel.append("<div id=\"DivCrawlStatus\" class=\"col-sm-2\" style=\"text-align:center\"><hg:trans>等待采集</hg:trans></div>");
                    $("#DivCrawlStatus").attr("status", "error")
                    $("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + data.Message + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>");
                    $("#BtnCraw").text("开始采集");
                    $("#BtnCraw").attr("disabled", false);
                    $("#TxtUrls").text("");
                }
                $.each(data.ResultObject, function (index, item) {
                    var url = $.trim(this);
                    if (url.length == 0)
                        return;
                    else if (!checkURL(url))
                        return;
                    var LogPanel = $("<div class=\"row bottom-line\"></div>").attr({ "itemurl": url, "status": "unload" }).appendTo($("#DivCrawLogPanel"));
                    LogPanel.append("<div class=\"col-sm-10\" style=\"text-overflow:ellipsis;\"><a href=\"" + url + "\" target=\"_blank\"><nobr>" + url + "</nobr></a></div>");
                    LogPanel.append("<div id=\"DivCrawlStatus\" class=\"col-sm-2\" style=\"text-align:center\"><hg:trans>等待采集</hg:trans></div>");
                });
                if ($("#DivCrawLogPanel>div").length > 0) {
                    var unloadList = $("#DivCrawLogPanel>div[status='unload']");
                    if (unloadList.length == 0) {
                        return;
                    }
                    DoCrawProducts(unloadList[0])
                }

            },
            error: function (XHR) {
                $(element).attr("status", "error")
                $(element).children("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + "<hg:trans>请求地址出错</hg:trans>：" + XHR.status + " - " + XHR.statusText + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>")
            },
            complete: function () {
                //DoCrawProduct();
            }
        });
    }

    //多连接采集
    function DoCrawProducts(element) {
        var url = $(element).attr("itemurl");
        $(element).attr("status", "loading").children("#DivCrawlStatus").text(translate.format("<hg:trans>正在采集...</hg:trans>"));
        var catalogId = $("#ddlProductCatalog").val()
        var Listitems = 0;
        $.ajax({
            type: "POST",
            url: "/Crawl/CrawProduct",
            data: { url: url, catalogId: catalogId, Listitems: Listitems },
            datatype: "json",
            async: true,
            global: false,
            success: function (data) {

                if (data.HasError) {
                    length = length - 1;
                    $(element).attr("status", "error")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + data.Message + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>");
                    if (length == 0) {
                        $("#BtnCraw").text("开始采集");
                        $("#BtnCraw").attr("disabled", false);
                        $("#TxtUrls").text("");
                        $("#craw").text("采集完成");
                        $("#craw").show();

                    }
                } else {
                    length = length - 1;
                    $(element).attr("status", "loaded")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")

                    //翻译标签
                    var CrawlProductId = data.MapData.CrawlProductId;//id
                    var FiledValue = data.MapData.FiledValue;//FiledValue
                    if (FiledValue != undefined) {
                        fany(CrawlProductId, FiledValue, $(element))//暂时屏蔽
                    }
                    $(element).attr("status", "loaded")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")
                    if (length == 0) {
                        $("#BtnCraw").text("开始采集");
                        $("#BtnCraw").attr("disabled", false);
                        $("#TxtUrls").text("");
                        $("#craw").text("采集完成");
                        $("#craw").show();
                    }
                }
            },
            error: function (XHR) {
                $(element).attr("status", "error")
                $(element).children("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + "<hg:trans>请求地址出错</hg:trans>：" + XHR.status + " - " + XHR.statusText + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>")
            },
            complete: function () {
                var unloadList = $("#DivCrawLogPanel>div[status='unload']");
                if (unloadList.length == 0) {
                    return;
                }
                DoCrawProducts(unloadList[0])
            }
        });
    }




    function DoCrawProduct(element) {
        var url = $(element).attr("itemurl");
        $(element).attr("status", "loading").children("#DivCrawlStatus").text(translate.format("<hg:trans>正在采集...</hg:trans>"));
        var catalogId = $("#ddlProductCatalog").val()
        var Listitems = 0;
        $.ajax({
            type: "POST",
            url: "/Crawl/CrawProduct",
            data: { url: url, catalogId: catalogId, Listitems: Listitems },
            datatype: "json",
            async: true,
            global: false,
            success: function (data) {

                if (data.HasError) {
                    length = length - 1;
                    $(element).attr("status", "error")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + data.Message + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>");
                    if (length == 0) {
                        $("#BtnCraw").text("开始采集");
                        $("#BtnCraw").attr("disabled", false);
                        $("#TxtUrls").text("");
                        $("#craw").text("采集完成");
                        $("#craw").show();

                    }
                } else {
                    length = length - 1;
                    $(element).attr("status", "loaded")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")

                    //翻译标签
                    var CrawlProductId = data.MapData.CrawlProductId;//id
                    var FiledValue = data.MapData.FiledValue;//FiledValue
                    if (FiledValue != undefined) {
                        fany(CrawlProductId, FiledValue, $(element))//暂时屏蔽
                    }
                    $(element).attr("status", "loaded")
                    $(element).children("#DivCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")
                    if (length == 0) {
                        $("#BtnCraw").text("开始采集");
                        $("#BtnCraw").attr("disabled", false);
                        $("#TxtUrls").text("");
                        $("#craw").text("采集完成");
                        $("#craw").show();
                    }
                }
            },
            error: function (XHR) {
                $(element).attr("status", "error")
                $(element).children("#DivCrawlStatus").html("<span class=\"text-danger\" title=\"" + "<hg:trans>请求地址出错</hg:trans>：" + XHR.status + " - " + XHR.statusText + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>")
            },
            complete: function () {
                DoStartCrawProduct();
            }
        });
    }

    function doCrawProduct(element) {
        var url = $(element).attr("itemurl");
        $(element).attr("status", "loading").children("#divCrawlStatus").text(translate.format("<hg:trans>正在采集...</hg:trans>"));
        var catalogId = $("#ddlProductCatalog").val()
        var Listitems = 1;
        $.ajax({
            type: "POST",
            url: "/Crawl/CrawProduct",
            data: { url: url, catalogId: catalogId, Listitems: Listitems },
            datatype: "json",
            global: false,
            success: function (data) {
                if (data.HasError) {
                    $(element).attr("status", "error")
                    $(element).children("#divCrawlStatus").html("<span class=\"text-danger\" title=\"" + data.Message + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>");
                } else {
                    $(element).attr("status", "loaded")
                    $(element).children("#divCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")

                    //翻译标签
                    var CrawlProductId = data.MapData.CrawlProductId;//id
                    var FiledValue = data.MapData.FiledValue;//FiledValue
                    if (FiledValue != undefined) {
                        fany(CrawlProductId, FiledValue, $(element))//暂时屏蔽
                    }
                    $(element).attr("status", "loaded")
                    $(element).children("#divCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")
                }
            },
            error: function (XHR) {
                $(element).attr("status", "error")
                $(element).children("#divCrawlStatus").html("<span class=\"text-danger\" title=\"" + "<hg:trans>请求地址出错</hg:trans>：" + XHR.status + " - " + XHR.statusText + "\"><i class=\"glyphicon glyphicon-info-sign\"></i> <hg:trans>采集失败</hg:trans></span>")
            },
            complete: function () {
                doStartCrawProduct();
            }
        });
    }

    //店铺


    //全局(访问服务器是否出现错误)
    var translateString = "";
    function fany(CrawlProductId, FiledValue, element) {
        $.ajax({
            type: "POST",
            url: "../Crawl/TranslateGoogleTKK",
            datatype: "json",
            success: function (data) {
                var tkk = TKK(data.MapData.a, data.MapData.b, data.MapData.c);
                strs = FiledValue.split(","); //字符分割
                for (var i = 0; i < strs.length ; i++) {
                    var tkey = tknu(strs[i], tkk);
                    if (i == strs.length - 1) {
                        doGoogleTrans(CrawlProductId, strs[i], tkey, element, "true");
                    } else {
                        doGoogleTrans(CrawlProductId, strs[i], tkey, element, "false");
                    }
                }
            },
            error: function () {
                redgle.showMessage("操作失败！");
            }
        });
    }

    function doUpdate(translateString, CrawlProductId, element) {
        $.ajax({
            type: "POST",
            url: "../Crawl/UpdateCrawlProductField",
            data: { CrawlProductId: CrawlProductId, strToTranslate: translateString },
            datatype: "json",
            success: function (data) {
                //$(element).attr("status", "loaded")
                //$(element).children("#divCrawlStatus").html("<span class=\"text-success\"><i class=\"glyphicon glyphicon-ok\"></i> <hg:trans>采集成功</hg:trans></span>")
            },
            error: function () {
                redgle.showMessage("操作失败！");
            }
        });
    }

    //翻译
    var doGoogleTrans = function (CrawlProductId, strToTranslate, tkey, element, isBool) {
        $.ajax({
            type: "POST",
            url: "../Crawl/TranslateGoogleString",
            data: { strToTranslate: strToTranslate, tk: tkey },
            datatype: "json",
            success: function (data) {
                if (data.HasError) {
                } else {
                    translateString += data.MapData.translateString + ",";
                    if (isBool == "true") {
                        //修改值
                        doUpdate(translateString, CrawlProductId, element);
                        translateString = "";
                    }
                }
            },
            error: function () {
                redgle.showMessage("操作失败！");
            }
        });
        return translateString;
    }



    var TKK = function (a, b, c) {
        return c + '.' + (parseInt(a) + parseInt(b));
    };

    function b(a, b) {
        for (var d = 0; d < b.length - 2; d += 3) {
            var c = b.charAt(d + 2),
                c = "a" <= c ? c.charCodeAt(0) - 87 : Number(c),
                c = "+" == b.charAt(d + 1) ? a >>> c : a << c;
            a = "+" == b.charAt(d) ? a + c & 4294967295 : a ^ c
        }
        return a
    }
    var tknu = function (a, TKK) {
        for (var e = TKK.split("."), h = Number(e[0]) || 0, g = [], d = 0, f = 0; f < a.length; f++) {
            var c = a.charCodeAt(f);
            128 > c ? g[d++] = c : (2048 > c ? g[d++] = c >> 6 | 192 : (55296 == (c & 64512) && f + 1 < a.length && 56320 == (a.charCodeAt(f + 1) & 64512) ? (c = 65536 + ((c & 1023) << 10) + (a.charCodeAt(++f) & 1023), g[d++] = c >> 18 | 240, g[d++] = c >> 12 & 63 | 128) : g[d++] = c >> 12 | 224, g[d++] = c >> 6 & 63 | 128), g[d++] = c & 63 | 128)
        }
        a = h;
        for (d = 0; d < g.length; d++) a += g[d], a = b(a, "+-a^+6");
        a = b(a, "+-3^+b+-f");
        a ^= Number(e[1]) || 0;
        0 > a && (a = (a & 2147483647) + 2147483648);
        a %= 1E6;
        return a.toString() + "." + (a ^ h)
    }

</script>
            </div>
    </div>
    <div style="clear:both; height:10px;">
    </div>

    

    
    <div class="waitting" id="divAjaxLoadingPanel" style="display:none;" tabindex="-1">
        <div class="spinner">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>
    <div class="scroll-to-top" style="display:none;" title="返回顶部">
        <i class="glyphicon glyphicon-chevron-up"></i>
    </div>
    <div class="scroll-to-bottom" style="display:none;" title="滚动到底部">
        <i class="glyphicon glyphicon-chevron-down"></i>
    </div>
    <script language="javascript" type="text/javascript">
        $(function () {
            $(document).scroll(function () {
                initScrollButtonState();
            });

            $(".scroll-to-top").click(function () {
                $('html,body').animate({ scrollTop: '0px' }, 200);
            });

            $(".scroll-to-bottom").click(function () {
                var h = $(document).height() - $(window).height();
                $('html,body').animate({ scrollTop: h+'px' }, 200);
            })
        });

        $(document).ready(function () {
            initScrollButtonState();
        });
        
        function initScrollButtonState() {
            var scroll = $(document).scrollTop();
            if (scroll < 10) {
                $(".scroll-to-top").css("display", "none");
            }
            else {
                $(".scroll-to-top").css("display", "");
            }

            var h = $(document).height() - $(window).height();
            if (h < 10) {
                $(".scroll-to-bottom").css("display", "none");
            }
            else {
                if (h - scroll < 10) {
                    $(".scroll-to-bottom").css("display", "none");
                }
                else {
                    $(".scroll-to-bottom").css("display", "");
                }
            }
        }

        $(".menucontrol> span").click(function () {
            var parentPenel = $(this).parents(".menucontrol");
            if (parentPenel.attr("class").indexOf("menuhide") >= 0) {
                $(".top_panel").removeClass("menuhide");
                $(".left_panel").removeClass("menuhide");
                $(".menucontrol").removeClass("menuhide");
                $(".content_panel").removeClass("menuhide");
            }
            else {
                $(".top_panel").addClass("menuhide");
                $(".left_panel").addClass("menuhide");
                $(".menucontrol").addClass("menuhide");
                $(".content_panel").addClass("menuhide");
            }
        });
    </script>
</body>
</html>